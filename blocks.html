<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no">
		<link rel="stylesheet" href="./css/fonts.css">
		<link rel="stylesheet" href="./css/highlight.min.css">
		<link rel="stylesheet" href="./css/bootstrap.min.css">
		<link rel="stylesheet" href="./css/styling.css">
		<link rel="stylesheet" href="./css/footer.css">
		<link rel="stylesheet" href="./css/index.css">
		<link rel="stylesheet" href="plugins/font-awesome-4.7.0/css/font-awesome.min.css">
		<link rel="icon" href="img/olink.png" type="image/x-icon">
		<title class="lang" key="LAB_INDEX_2">Blocks</title>
	</head>
	<body class="bg-dark">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="container">
				<a class="navbar-brand" href="index.html">
					<span>
						<img class="header-image" src="./img/olink.png" alt="logo">
						<span class="fontCuriser lang" key="LAB_INDEX_TITLE">Olink Explorer</span>
					</span>
				</a>
				<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-label="collapse navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<form class="form-inline mr-3" method="post" action="javascript:window.clickSearch();" style="width: 80%;">
						<input type="hidden" name="_csrf" value="2J5QVjIM-2HCLxhSGo_ab99-9GK6b8POdjAE">
						<div class="input-group input-group-sm" style="width: 100%;">
							<input class="form-control form-control-sm indexInput" type="text" id="id_search" name="query" placeholder="Search transaction hash, address, token name">
							<div class="input-group-append">
								<button class="btn btn-primary" type="submit" style="border-radius: 0 1rem 1rem 0;">
									<i class="fa fa-search"></i>
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</nav>
		<div class="pb-4 pt-3 pt-md-4" style="background-color: #ffffff;">
			<div class="container px-2 px-sm-3">
				<h1 class="h2 lang" key="LAB_INDEX_2">Blocks</h1>
				<hr>
				<div class="table-responsive">
					<table class="table table-striped mb-0">
						<thead>
							<tr>
								<th class="data-header lang" key="LAB_INDEX_HEIGHT">Height</th>
								<th class="data-header text-center lang" key="LAB_INDEX_TIME">Timestamp (utc)</th>
								<th class="data-header text-center lang" key="LAB_INDEX_AGE">Age</th>
								<th class="data-header text-center lang" key="LAB_INDEX_MINER">Miner</th>
								<th class="data-header text-center lang" key="LAB_INDEX_TXS">Txs</th>
								<th class="data-header text-center lang" key="LAB_INDEX_AMOUNT">Amount</th>
							</tr>
						</thead>
						<tbody id="id_blocks">

						</tbody>
					</table>
				</div>
				<hr>
				<nav aria-label="Page navigation">
					<ul class="pagination pagination-lg justify-content-center flex-wrap">
						<li class="page-item">
							<a class="page-link lang" key="LAB_INDEX_FIRST" href="javascript:window.clickHeadBlock();">First</a>
						</li>
						<li class="page-item" style="display: none">
							<a class="page-link" href="javascript:window.clickPrevBlock();"><</a>
						</li>
						<li class="page-item disabled" style="display: none">
							<a class="page-link" id="id_blockpageIndex">1 / 1</a>
						</li>
						<li class="page-item">
							<a class="page-link" href="javascript:window.clickNextBlock();">></a>
						</li>
						<li class="page-item" style="display: none">
							<a class="page-link lang" key="LAB_INDEX_LAST" href="javascript:window.clickLastBlock();">Last</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
		<footer class="footer border-top border-primary bg-dark pt-3 pb-1 px-3 text-white" style="border-width: 5px !important;">
			<div class="container">
				<div class="row">
					<div class="col-md-4">
						<dl>
							<dd class="lavaFooter lavaDownload"><img src="./img/olink_1.png" alt="Olink Official Website">
								<a href="../index.html" target="_blank" title="Olink Official Website"></a>
							</dd>
						</dl>
					</div>
					<div class="col-md-5 text-md-right" style="padding-top:15px;">
						<dl>
							<dt class="lavaFooter lavaDownload lang" key="LAB_INDEX_LINKS">Related sites</dt>
							<dd class="lavaFooter-list lavaDownload-list">
								<p>
									<a class="pText lang" key="LAB_INDEX_WEB" href="https://open-link.co/" target="_blank" title="">Olink Official Website</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="" target="_blank" title="">Olink Wallet</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="https://t.me/OlinkDAOEN" target="_blank" title="">Olink Telegram</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="https://twitter.com/olinkdao" target="_blank" title="">Olink Twitter</a>
								</p>
							</dd>
						</dl>
					</div>
					<div class="col-md-3 text-md-right" style="padding-top:15px;">
						<dl>
							<dt class="lavaFooter lavaDownload lang" key="LAB_INDEX_LANGUAGE">Language</dt>
							<dd class="lavaFooter-list lavaDownload-list">
								<p class="dataC">
									<a class="pText lang" key="LAB_INDEX_ENGLISH" href="javascript:setLanguage('en')" title="">English</a>
								</p>
								<p class="dataC">
									<a class="pText lang" key="LAB_INDEX_CHINESE" href="javascript:setLanguage('ch')" title="">Chinese</a>
								</p>
							</dd>
						</dl>
					</div>
				</div>
			</div>
		</footer>
		<script src="./js/jquery-3.5.1.min.js"></script>
		<script src="./js/popper.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		<script src="./js/highlight.min.js"></script>
		<script src="./js/Base58.js"></script>
		<script src="./js/lang/ch.js"></script>
		<script src="./js/lang/en.js"></script>
		<script src="./js/core.js"></script>
		<script src="./js/render.js"></script>
		<script>
			$(document).ready(function() {
				$('[data-toggle="tooltip"]').tooltip();
				$('[data-toggle="popover"]').popover({
					html: true,
					container: "body"
				});


			});
		</script>
		<script>
			window.dataLayer = window.dataLayer || [];

			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-XXXX-X');

			var blockPageCount = 10;
		    var blockPageIndex = 1;
		    var blockPages = 1;

			window.onload = function() {
				changeLang();
				// proxyBlocks(1, 10, function(data) {
				// 	document.getElementById("id_blocks").innerHTML = renderBlocksIndex(data);
				// }, function(err) {

				// });

				showPageBlock(1);

				proxyVersion(function(data_version) {
					document.getElementById("id_wallet_link").href = "https://owstore.owopenlinkoracle.com/OW_Store." + parseVersion(data_version.result) + ".apk";
				}, function(err_version) {

				});
			}

			var showPageBlock = function(pageIndex) {
		        proxyBlocks(pageIndex, blockPageCount, function(data) {
		            document.getElementById("id_blocks").innerHTML = renderBlocksIndex(data);

		            blockPages = Math.ceil((data.list[0].number + blockPageCount * (pageIndex - 1)) / blockPageCount);

		            document.getElementById("id_blockpageIndex").innerHTML = pageIndex + "/" + blockPages;
		        }, function(err) {

		        });
		    }

				    // 
		    window.clickHeadBlock = function() {
		        blockPageIndex = 1;
		        showPageBlock(blockPageIndex);
		    }

		    window.clickLastBlock = function() {
		        blockPageIndex = blockPages;
		        showPageBlock(blockPageIndex);
		    }

		    window.clickPrevBlock = function() {
		        if(blockPageIndex <= 1) {
		            return;
		        }
		        blockPageIndex = blockPageIndex - 1
		        showPageBlock(blockPageIndex);
		    }

		    window.clickNextBlock = function() {
		        if(blockPageIndex >= blockPages) {
		            return;
		        }
		        blockPageIndex = blockPageIndex + 1;
		        showPageBlock(blockPageIndex);
		    }

		</script>
	</body>
</html>

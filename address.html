<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no">
		<link rel="stylesheet" href="./css/fonts.css">
		<link rel="stylesheet" href="./css/highlight.min.css">
		<link rel="stylesheet" href="./css/bootstrap.min.css">
		<link rel="stylesheet" href="./css/styling.css">
		<link rel="stylesheet" href="./css/footer.css">
		<link rel="stylesheet" href="./css/index.css">
		<link rel="stylesheet" href="plugins/font-awesome-4.7.0/css/font-awesome.min.css">
		<link rel="icon" href="img/olink.png" type="image/x-icon">
		<title class="lang" key="LAB_ADDRESS_TITLE">Address</title>
	</head>
	<body class="bg-dark">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="container">
				<a class="navbar-brand" href="index.html">
					<span>
						<img class="header-image" src="./img/olink.png" alt="logo">
						<span class="fontCuriser lang" key="LAB_INDEX_TITLE">Olink Explorer</span>
					</span>
				</a>
				<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-label="collapse navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<form class="form-inline mr-3" method="post" action="javascript:window.clickSearch();" style="width: 80%;">
						<input type="hidden" name="_csrf" value="2J5QVjIM-2HCLxhSGo_ab99-9GK6b8POdjAE">
						<div class="input-group input-group-sm" style="width: 100%;">
							<input class="form-control form-control-sm indexInput" type="text" id="id_search" name="query" placeholder="Search transaction hash, address, token name">
							<div class="input-group-append">
								<button class="btn btn-primary" type="submit" style="border-radius: 0 1rem 1rem 0;">
									<i class="fa fa-search"></i>
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</nav>
		<div class="pb-4 pt-3 pt-md-4" style="background-color: #ffffff;">
			<div class="container px-2 px-sm-3">
				<h1 class="h3"><span class="lang" key="LAB_ADDRESS_1">Address</span>
					<small class="monospace word-wrap" style="width: 100%;" id="id_addr"></small>
					<br>
					<small class="monospace word-wrap" style="width: 100%;" ><span class="lang" key="LAB_ADDRESS_BALANCE"></span><span id="id_balance"></span></small>
				</h1>
				<hr>
				<ul class="nav nav-tabs mb-3">
					<li class="nav-item">
						<a class="nav-link active lang" key="LAB_TX_DETAIL" data-toggle="tab" href="#tab-details" role="tab">Details</a>
					</li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="tab-details" role="tabpanel">
						<div class="card mb-3 shadow-sm">
							<div class="card-header">
								<div class="row">
									<div class="col-md-4">
										<h2 class="h6 mb-0"><span class="lang" key="LAB_INDEX_TRANSACTIONS">Transaction</span></h2>
									</div>
								</div>
							</div>
							<div class="table-responsive">
								<table class="table table-striped mb-0">
									<thead>
										<tr>
											<th class="data-header lang" key="LAB_INDEX_HASH">Hash</th>
											<th class="data-header text-center lang" key="LAB_INDEX_TIME">Timestamp (utc)</th>
											<th class="data-header text-center lang" key="LAB_INDEX_FROM">From</th>
											<th class="data-header text-center lang" key="LAB_INDEX_TO">To</th>
											<th class="data-header text-center lang" key="LAB_INDEX_VALUE">Amount</th>
										</tr>
									</thead>
									<tbody id="id_txs">

									</tbody>
								</table>
							</div>
							<hr>
							<nav aria-label="Page navigation">
								<ul class="pagination pagination-lg justify-content-center flex-wrap">
									<li class="page-item">
										<a class="page-link lang" key="LAB_INDEX_FIRST" href="javascript:window.clickHeadTx();">First</a>
									</li>
									<li class="page-item" style="display: none">
										<a class="page-link" href="javascript:window.clickPrevTx();"><</a>
									</li>
									<li class="page-item disabled" style="display: none">
										<a class="page-link" id="id_txpageIndex">1 / 1</a>
									</li>
									<li class="page-item">
										<a class="page-link" href="javascript:window.clickNextTx();">></a>
									</li>
									<li class="page-item" style="display: none">
										<a class="page-link lang" key="LAB_INDEX_LAST" href="javascript:window.clickLastTx();">Last</a>
									</li>
								</ul>
							</nav>
						</div>
					</div>
					<div class="tab-pane" id="tab-json" role="tabpanel">
						<ul class="nav nav-pills mb-3">
							<li class="nav-item">
								<a class="nav-link active" data-toggle="tab" href="#tab-json-block-summary" role="tab">Block Summary</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#tab-json-tx-ids" role="tab">Transaction IDs</a>
							</li>
						</ul>
						<div class="tab-content">
							<div class="tab-pane active" id="tab-json-block-summary" role="tabpanel">
								<pre><code class="json bg-light"></code></pre>
							</div>
							<div class="tab-pane" id="tab-json-tx-ids" role="tabpanel">
								<pre><code class="json bg-light"></code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="footer border-top border-primary bg-dark pt-3 pb-1 px-3 text-white" style="border-width: 5px !important;">
			<div class="container">
				<div class="row">
					<div class="col-md-4">
						<dl>
							<dd class="lavaFooter lavaDownload"><img src="./img/olink_1.png" alt="Olink Official Website">
								<a href="../index.html" target="_blank" title="Olink Official Website"></a>
							</dd>
						</dl>
					</div>
					<div class="col-md-5 text-md-right" style="padding-top:15px;">
						<dl>
							<dt class="lavaFooter lavaDownload lang" key="LAB_INDEX_LINKS">Related sites</dt>
							<dd class="lavaFooter-list lavaDownload-list">
								<p>
									<a class="pText lang" key="LAB_INDEX_WEB" href="https://open-link.co/" target="_blank" title="">Olink Official Website</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="" target="_blank" title="">Olink Wallet</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="https://t.me/OlinkDAOEN" target="_blank" title="">Olink Telegram</a>
								</p>
								<p>
									<a class="pText" id="id_wallet_link" href="https://twitter.com/olinkdao" target="_blank" title="">Olink Twitter</a>
								</p>
							</dd>
						</dl>
					</div>
					<div class="col-md-3 text-md-right" style="padding-top:15px;">
						<dl>
							<dt class="lavaFooter lavaDownload lang" key="LAB_INDEX_LANGUAGE">Language</dt>
							<dd class="lavaFooter-list lavaDownload-list">
								<p class="dataC">
									<a class="pText lang" key="LAB_INDEX_ENGLISH" href="javascript:setLanguage('en')" title="">English</a>
								</p>
								<p class="dataC">
									<a class="pText lang" key="LAB_INDEX_CHINESE" href="javascript:setLanguage('ch')" title="">Chinese</a>
								</p>
							</dd>
						</dl>
					</div>
				</div>
			</div>
		</footer>
		<script src="./js/jquery-3.5.1.min.js"></script>
		<script src="./js/popper.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		<script src="./js/highlight.min.js"></script>
		<script src="./js/Base58.js"></script>
		<script src="./js/bignumber.js"></script>
		<script src="./js/lang/ch.js"></script>
		<script src="./js/lang/en.js"></script>
		<script src="./js/core.js"></script>
		<script src="./js/render.js"></script>
		<script>
			$(document).ready(function() {
				$('[data-toggle="tooltip"]').tooltip();
				$('[data-toggle="popover"]').popover({
					html: true,
					container: "body"
				});


			});

			hljs.initHighlightingOnLoad();
		</script>
		<script>
			window.dataLayer = window.dataLayer || [];

			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-XXXX-X');

			var blockPageCount = 5;
		    var blockPageIndex = 1;
		    var blockPages = 1;

		    var addr = ""

			window.onload = function() {
				changeLang();
				var ps = window.location.href.split('#');
				if(ps.length < 2) {
					return;
				}
				addr = Base58.toAddr(ps[1]);
				proxyBalance(addr, function(data) {
					document.getElementById('id_addr').innerHTML = Base58.fromAddr(addr);
					document.getElementById('id_balance').innerHTML = renderAmount(data.result);
				}, function(err) {

				})

				// proxyAddrPageTxs(addr, 1, 5, function(data_txs) {
				// 	document.getElementById("id_txs").innerHTML = renderTxsIndex(data_txs);
				// }, function(err) {

				// })
				showPageTx(1);

				proxyVersion(function(data_version) {
					document.getElementById("id_wallet_link").href = "https://owstore.owopenlinkoracle.com/OW_Store." + parseVersion(data_version.result) + ".apk";
				}, function(err_version) {

				});
			}

			var showPageTx = function(pageIndex) {
		        proxyAddrPageTxs(addr, pageIndex, blockPageCount, function(data) {
		            document.getElementById("id_txs").innerHTML = renderTxsIndex(data);

		            blockPages = Math.ceil(data.total / blockPageCount);

		            document.getElementById("id_txpageIndex").innerHTML = pageIndex + "/" + blockPages;
		        }, function(err) {

		        });
		    }
				    // 
		    window.clickHeadTx = function() {
		        blockPageIndex = 1;
		        showPageTx(blockPageIndex);
		    }

		    window.clickLastTx = function() {
		        blockPageIndex = blockPages;
		        showPageTx(blockPageIndex);
		    }

		    window.clickPrevTx = function() {
		        if(blockPageIndex <= 1) {
		            return;
		        }
		        blockPageIndex = blockPageIndex - 1
		        showPageTx(blockPageIndex);
		    }

		    window.clickNextTx = function() {
		        if(blockPageIndex >= blockPages) {
		            return;
		        }
		        blockPageIndex = blockPageIndex + 1;
		        showPageTx(blockPageIndex);
		    }

		</script>
	</body>
</html>
